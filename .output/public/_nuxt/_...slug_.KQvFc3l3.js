import{_ as q,u as re,a as ue}from"./Button.C-uTWANt.js";import{E as L,r as z,o as Y,G as s,H as de,I as Z,J as B,j as G,K as ce,d as P,b as r,c as g,e as n,L as ee,M as E,n as k,f as T,N as te,O as K,P as ge,Q as J,R as _,g as A,S as me,U as ve,t as j,V as H,w as fe,A as pe,W as he,X as ye,Y as be,F as R,D as W,B as xe,Z as we,z as ke}from"./entry.tpfecCsc.js";import Ce from"./Rocket.D0llxrnG.js";import{q as Ie}from"./query.CN7Ta2TH.js";import{u as X}from"./asyncData.CbSpAH4n.js";import"./Icon.Bv9issqk.js";import"./index.C7IIErb3.js";import"./preview.BPLPfzLR.js";const ze={wrapper:"relative inline-flex items-center justify-center flex-shrink-0",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-full",text:"font-medium leading-none text-gray-900 dark:text-white truncate",placeholder:"font-medium leading-none text-gray-500 dark:text-gray-400 truncate",size:{"3xs":"h-4 w-4 text-[8px]","2xs":"h-5 w-5 text-[10px]",xs:"h-6 w-6 text-xs",sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg",xl:"h-14 w-14 text-xl","2xl":"h-16 w-16 text-2xl","3xl":"h-20 w-20 text-3xl"},chip:{base:"absolute rounded-full ring-1 ring-white dark:ring-gray-900 flex items-center justify-center text-white dark:text-gray-900 font-medium",background:"bg-{color}-500 dark:bg-{color}-400",position:{"top-right":"top-0 right-0","bottom-right":"bottom-0 right-0","top-left":"top-0 left-0","bottom-left":"bottom-0 left-0"},size:{"3xs":"h-[4px] min-w-[4px] text-[4px] p-px","2xs":"h-[5px] min-w-[5px] text-[5px] p-px",xs:"h-1.5 min-w-[0.375rem] text-[6px] p-px",sm:"h-2 min-w-[0.5rem] text-[7px] p-0.5",md:"h-2.5 min-w-[0.625rem] text-[8px] p-0.5",lg:"h-3 min-w-[0.75rem] text-[10px] p-0.5",xl:"h-3.5 min-w-[0.875rem] text-[11px] p-1","2xl":"h-4 min-w-[1rem] text-[12px] p-1","3xl":"h-5 min-w-[1.25rem] text-[14px] p-1"}},icon:{base:"text-gray-500 dark:text-gray-400 flex-shrink-0",size:{"3xs":"h-2 w-2","2xs":"h-2.5 w-2.5",xs:"h-3 w-3",sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6",xl:"h-7 w-7","2xl":"h-8 w-8","3xl":"h-10 w-10"}},default:{size:"sm",icon:null,chipColor:null,chipPosition:"top-right"}};let je=0;function $e(){return`nuid-${je++}`}const Se=(e,a)=>{const i=L("form-events",void 0),t=L("form-group",void 0),f=L("form-inputs",void 0),h=z(e==null?void 0:e.id);Y(()=>{h.value=(e==null?void 0:e.legend)===null||e.legend?void 0:(e==null?void 0:e.id)??$e(),t&&(t.inputId.value=h.value,f&&(f.value[t.name.value]=h))});const p=z(!1);function d(y,C){i&&i.emit({type:y,path:C})}function b(){d("blur",t==null?void 0:t.name.value),p.value=!0}function m(){d("change",t==null?void 0:t.name.value)}const c=de(()=>{(p.value||t!=null&&t.eagerValidation.value)&&d("input",t==null?void 0:t.name.value)},300);return{inputId:h,name:s(()=>(e==null?void 0:e.name)??(t==null?void 0:t.name.value)),size:s(()=>{var C;const y=a.size[t==null?void 0:t.size.value]?t==null?void 0:t.size.value:null;return(e==null?void 0:e.size)??y??((C=a==null?void 0:a.default)==null?void 0:C.size)}),color:s(()=>{var y;return(y=t==null?void 0:t.error)!=null&&y.value?"red":e==null?void 0:e.color}),emitFormBlur:b,emitFormInput:c,emitFormChange:m}},S=Z(B.ui.strategy,B.ui.input,ce),_e=P({components:{UIcon:q},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>S.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(S.size).includes(e)}},color:{type:String,default:()=>S.default.color,validator(e){return[...B.ui.colors,...Object.keys(S.color)].includes(e)}},variant:{type:String,default:()=>S.default.variant,validator(e){return[...Object.keys(S.variant),...Object.values(S.color).flatMap(a=>Object.keys(a))].includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur"],setup(e,{emit:a,slots:i}){const{ui:t,attrs:f}=te("input",K(e,"ui"),S,K(e,"class")),{size:h,rounded:p}=re({ui:t,props:e}),{emitFormBlur:d,emitFormInput:b,size:m,color:c,inputId:y,name:C}=Se(e,S),x=s(()=>h.value||m.value),$=z(ge({},e.modelModifiers,{trim:!1,lazy:!1,number:!1})),F=z(null),v=()=>{var u;e.autofocus&&((u=F.value)==null||u.focus())},l=u=>{$.value.trim&&(u=u.trim()),($.value.number||e.type==="number")&&(u=me(u)),a("update:modelValue",u),b()},w=u=>{$.value.lazy||l(u.target.value)},I=u=>{const V=u.target.value;$.value.lazy&&l(V),$.value.trim&&(u.target.value=V.trim())},N=u=>{d(),a("blur",u)};Y(()=>{setTimeout(()=>{v()},e.autofocusDelay)});const D=s(()=>{var V,Q;const u=((Q=(V=t.value.color)==null?void 0:V[c.value])==null?void 0:Q[e.variant])||t.value.variant[e.variant];return J(_(t.value.base,t.value.form,p.value,t.value.placeholder,t.value.size[x.value],e.padded?t.value.padding[x.value]:"p-0",u==null?void 0:u.replaceAll("{color}",c.value),(o.value||i.leading)&&t.value.leading.padding[x.value],(O.value||i.trailing)&&t.value.trailing.padding[x.value]),e.inputClass)}),o=s(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),O=s(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),ae=s(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),le=s(()=>e.loading&&!o.value?e.loadingIcon:e.trailingIcon||e.icon),ne=s(()=>_(t.value.icon.leading.wrapper,t.value.icon.leading.pointer,t.value.icon.leading.padding[x.value])),se=s(()=>_(t.value.icon.base,c.value&&B.ui.colors.includes(c.value)&&t.value.icon.color.replaceAll("{color}",c.value),t.value.icon.size[x.value],e.loading&&t.value.icon.loading)),ie=s(()=>_(t.value.icon.trailing.wrapper,t.value.icon.trailing.pointer,t.value.icon.trailing.padding[x.value])),oe=s(()=>_(t.value.icon.base,c.value&&B.ui.colors.includes(c.value)&&t.value.icon.color.replaceAll("{color}",c.value),t.value.icon.size[x.value],e.loading&&!o.value&&t.value.icon.loading));return{ui:t,attrs:f,name:C,inputId:y,input:F,isLeading:o,isTrailing:O,inputClass:D,leadingIconName:ae,leadingIconClass:se,leadingWrapperIconClass:ne,trailingIconName:le,trailingIconClass:oe,trailingWrapperIconClass:ie,onInput:w,onChange:I,onBlur:N}}}),Be=["id","name","value","type","required","placeholder","disabled"];function Ne(e,a,i,t,f,h){const p=q;return r(),g("div",{class:k(e.ui.wrapper)},[n("input",ee({id:e.inputId,ref:"input",name:e.name,value:e.modelValue,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled||e.loading,class:e.inputClass},e.attrs,{onInput:a[0]||(a[0]=(...d)=>e.onInput&&e.onInput(...d)),onBlur:a[1]||(a[1]=(...d)=>e.onBlur&&e.onBlur(...d)),onChange:a[2]||(a[2]=(...d)=>e.onChange&&e.onChange(...d))}),null,16,Be),E(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(r(),g("span",{key:0,class:k(e.leadingWrapperIconClass)},[E(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[A(p,{name:e.leadingIconName,class:k(e.leadingIconClass)},null,8,["name","class"])])],2)):T("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(r(),g("span",{key:1,class:k(e.trailingWrapperIconClass)},[E(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[A(p,{name:e.trailingIconName,class:k(e.trailingIconClass)},null,8,["name","class"])])],2)):T("",!0)],2)}const Me=G(_e,[["render",Ne]]),M=Z(B.ui.strategy,B.ui.avatar,ze),Ae=P({components:{UIcon:q},inheritAttrs:!1,props:{src:{type:[String,Boolean],default:null},alt:{type:String,default:null},text:{type:String,default:null},icon:{type:String,default:()=>M.default.icon},size:{type:String,default:()=>M.default.size,validator(e){return Object.keys(M.size).includes(e)}},chipColor:{type:String,default:()=>M.default.chipColor,validator(e){return["gray",...B.ui.colors].includes(e)}},chipPosition:{type:String,default:()=>M.default.chipPosition,validator(e){return Object.keys(M.chip.position).includes(e)}},chipText:{type:[String,Number],default:null},imgClass:{type:String,default:""},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:a,attrs:i}=te("avatar",K(e,"ui"),M),t=s(()=>typeof e.src=="boolean"?null:e.src),f=s(()=>(e.alt||"").split(" ").map(y=>y.charAt(0)).join("").substring(0,2)),h=s(()=>J(_(a.value.wrapper,(m.value||!t.value)&&a.value.background,a.value.rounded,a.value.size[e.size]),e.class)),p=s(()=>J(_(a.value.rounded,a.value.size[e.size]),e.imgClass)),d=s(()=>_(a.value.icon.base,a.value.icon.size[e.size])),b=s(()=>_(a.value.chip.base,a.value.chip.size[e.size],a.value.chip.position[e.chipPosition],a.value.chip.background.replaceAll("{color}",e.chipColor))),m=z(!1);ve(()=>e.src,()=>{m.value&&(m.value=!1)});function c(){m.value=!0}return{ui:a,attrs:i,wrapperClass:h,imgClass:p,iconClass:d,chipClass:b,url:t,placeholder:f,error:m,onError:c}}}),Oe=["alt","src"];function Ve(e,a,i,t,f,h){const p=q;return r(),g("span",{class:k(e.wrapperClass)},[e.url&&!e.error?(r(),g("img",ee({key:0,class:e.imgClass,alt:e.alt,src:e.url},e.attrs,{onError:a[0]||(a[0]=(...d)=>e.onError&&e.onError(...d))}),null,16,Oe)):e.text?(r(),g("span",{key:1,class:k(e.ui.text)},j(e.text),3)):e.icon?(r(),H(p,{key:2,name:e.icon,class:k(e.iconClass)},null,8,["name","class"])):e.placeholder?(r(),g("span",{key:3,class:k(e.ui.placeholder)},j(e.placeholder),3)):T("",!0),e.chipColor?(r(),g("span",{key:4,class:k(e.chipClass)},j(e.chipText),3)):T("",!0),E(e.$slots,"default")],2)}const Fe=G(Ae,[["render",Ve]]),Ue={class:"max-w-sm"},Ee={class:"text-sm font-medium group-hover:text-primary-600"},Te={class:"text-gray-400 text-sm"},qe={__name:"ProjectCard",props:{project:{type:Object,required:!0}},setup(e){return(a,i)=>{const t=Fe,f=pe;return r(),H(f,{class:"flex items-end gap-4 group p-2 -m-2 rounded-lg",to:e.project.url,target:"_blank",external:""},{default:fe(()=>[n("div",Ue,[n("h3",Ee,j(e.project.name),1),n("p",Te,j(e.project.description),1)]),i[0]||(i[0]=n("div",{class:"flex-1 border-b border-dashed border-gray-300 dark:border-gray-800 group-hover:border-gray-700"},null,-1)),A(t,{src:e.project.thumbnail,ui:{rounded:"rounded z-10 relative"},size:"md",alt:e.project.name},null,8,["src","alt"])]),_:1},8,["to"])}}},De="https://api.loavesting.com/",Le=async(e,a)=>{try{let i={keyword:e,category:a};return await $fetch(De+"api/searchMusic",{method:"POST",body:i})}catch(i){throw i}},U={searchMusic:Le},Re={class:"container mx-auto p-4"},We={class:"mb-8"},Ke={class:"flex items-center gap-3"},Je={key:0},He={key:1},Qe={class:"space-y-4"},Xe={class:"text-lg font-bold"},Ye={class:"text-sm text-gray-500 ml-2"},Ze={class:"text-gray-600"},Ge={class:"text-xl text-gray-700"},Pe={class:"flex justify-center mt-4 space-x-2"},et=["disabled"],tt=["onClick","disabled"],at=["disabled"],lt={key:2},nt={class:"min-h-screen"},st={class:"space-y-8"},it={class:"space-y-2"},ft={__name:"[...slug]",setup(e){const a=he(),i=s(()=>a.params.slug),t=z(1),f=z(10),{data:h,pending:p}=X("api-data",()=>i.value[0]==="all"?U.searchMusic(null,null):U.searchMusic(null,i.value[0])),{data:d}=X("projects-all",()=>Ie("/loavesting").find()),b=z(""),m=z(h.value),c=z(p.value);ye(()=>{m.value=h.value,c.value=p.value});const y=async()=>{b.value===""||b.value===null||(c.value=!0,i.value[0]==="all"?m.value=await U.searchMusic(b.value,null):m.value=await U.searchMusic(b.value,i.value[0]),c.value=!1)},C=s(()=>{var w;const v=(t.value-1)*f.value,l=v+f.value;return((w=m.value)==null?void 0:w.result.slice(v,l))||[]}),x=s(()=>{var v;return Math.ceil((((v=m.value)==null?void 0:v.result.length)||0)/f.value)}),$=v=>{t.value=v},F=s(()=>{const v=x.value,l=t.value,w=2,I=[];for(let N=Math.max(2,l-w);N<=Math.min(v-1,l+w);N++)I.push(N);return l-w>2&&I.unshift("..."),l+w<v-1&&I.push("..."),I.unshift(1),v>1&&I.push(v),I});return(v,l)=>{const w=Me,I=ue,N=Ce,D=qe;return r(),g("div",Re,[n("div",We,[n("div",Ke,[A(w,{placeholder:i.value+" 에서 아티스트 / 곡명 / 카테고리 검색",class:"flex-1",size:"lg",modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=o=>b.value=o),onKeydown:be(y,["enter"])},null,8,["placeholder","modelValue"]),A(I,{label:"검색 →",size:"lg",color:"black",onClick:y})])]),c.value?(r(),g("div",Je,l[3]||(l[3]=[n("main",{class:"min-h-screen flex justify-center items-center"},[n("p",{class:"text-gray-500"},"데이터를 불러오는 중입니다...")],-1)]))):C.value&&C.value.length!==0?(r(),g("div",He,[n("ul",Qe,[(r(!0),g(R,null,W(C.value,o=>(r(),g("li",{key:o.uid,class:"p-4 bg-white rounded-lg shadow-md flex justify-between items-center"},[n("div",null,[n("h2",Xe,[ke(j(o.title)+" ",1),n("span",Ye,"by "+j(o.artist),1)]),n("p",Ze,"카테고리: "+j(o.subcategory),1)]),n("p",Ge,j(o.people)+"명",1)]))),128))]),n("div",Pe,[n("button",{onClick:l[1]||(l[1]=o=>$(t.value-1)),disabled:t.value===1,class:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50"}," 이전 ",8,et),(r(!0),g(R,null,W(F.value,o=>(r(),g("button",{key:o,onClick:O=>$(o),class:k(["px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",{"bg-gray-400":t.value===o}]),disabled:o==="..."},j(o),11,tt))),128)),n("button",{onClick:l[2]||(l[2]=o=>$(t.value+1)),disabled:t.value===x.value,class:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50"}," 다음 ",8,at)])])):(r(),g("div",lt,[n("main",nt,[n("div",st,[l[6]||(l[6]=n("h1",{class:"uppercase text-s font-semibold text-black-400 mb-4"},"이게 무슨 일이죠?",-1)),n("ul",it,[l[4]||(l[4]=xe('<li><a class="flex items-center gap-3 hover:bg-gray-100 dark:hover:bg-white/10 p-2 rounded-lg -m-2 text-sm min-w-0"><p class="truncate text-gray-700 dark:text-gray-200">검색 결과가 없습니다.</p></a></li><li><a class="flex items-center gap-3 hover:bg-gray-100 dark:hover:bg-white/10 p-2 rounded-lg -m-2 text-sm min-w-0"><p class="truncate text-gray-700 dark:text-gray-200">혹은, 로아베스팅 API 서버에 문제가 발생했습니다.</p></a></li><li><a class="flex items-center gap-3 hover:bg-gray-100 dark:hover:bg-white/10 p-2 rounded-lg -m-2 text-sm min-w-0"><p class="truncate text-gray-700 dark:text-gray-200">어쩔 수 없이 귀여운 로켓을 봐야할거같아요</p></a></li>',3)),A(N)]),n("div",null,[l[5]||(l[5]=n("h1",{class:"uppercase text-s font-semibold text-black-400 mb-4"},"아니면...",-1)),(r(!0),g(R,null,W(we(d),(o,O)=>(r(),H(D,{key:O,project:o},null,8,["project"]))),128))])])])]))])}}};export{ft as default};
